@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Design Tokens - CSS Custom Properties
   ========================================================================== */
@layer base {
  :root {
    /* Glass/Translucency Tokens */
    --glass-opacity-light: 0.15;
    --glass-opacity-medium: 0.2;
    --glass-opacity-strong: 0.3;
    --glass-opacity-stronger: 0.4;
    --glass-opacity-dark: 0.85;

    /* Blur Tokens */
    --blur-glass: 8px;

    /* Border Tokens */
    --border-glass-light: 1px;
    --border-glass-medium: 2px;
    --border-glass-strong: 3px;

    /* Border Opacity Tokens */
    --border-opacity-light: 0.2;
    --border-opacity-medium: 0.3;
    --border-opacity-strong: 0.5;
    --border-opacity-stronger: 0.6;
    --border-opacity-strongest: 0.9;

    /* State Color Tokens - Sync with state-themes.js */
    --state-idle: #1e293b;      /* slate-800 */
    --state-listening: #059669;  /* emerald-600 */
    --state-processing: #7c3aed; /* violet-600 */
    --state-speaking: #2563eb;   /* blue-600 */
    --state-connecting: #d97706; /* amber-600 */
    --state-error: #dc2626;      /* red-600 */

    /* Timing Tokens */
    --transition-state: 0.5s ease;
    --transition-interaction: 0.2s ease;
  }
}

/* ==========================================================================
   State Management - Body Background Transitions
   ========================================================================== */
@layer components {
  /* Base body styles */
  body {
    transition: background var(--transition-state);
    min-height: 100vh;
  }

  /* Smooth transition for animations too */
  body.state-idle,
  body.state-listening,
  body.state-processing,
  body.state-speaking,
  body.state-connecting,
  body.state-error {
    transition: background var(--transition-state);
  }

  /* State: Idle - Dark slate/blue */
  body.state-idle {
    background-color: var(--state-idle);
  }

  /* State: Listening - Green with pulse */
  body.state-listening {
    background-color: var(--state-listening);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* State: Processing - Purple/violet */
  body.state-processing {
    background-color: var(--state-processing);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* State: Speaking - Blue */
  body.state-speaking {
    background-color: var(--state-speaking);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* State: Connecting - Yellow */
  body.state-connecting {
    background-color: var(--state-connecting);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* State: Error - Red */
  body.state-error {
    background-color: var(--state-error);
  }

  /* Pulse animation for listening state */
  @keyframes pulse-glow {
    0%, 100% {
      filter: brightness(1);
    }
    50% {
      filter: brightness(1.3);
    }
  }

  /* ==========================================================================
     DaisyUI Component Overrides
     ========================================================================== */

  /* Transparent navigation - show body gradient through */
  .navbar {
    background: transparent !important;
    backdrop-filter: none !important;
  }

  .bg-base-200 {
    background: transparent !important;
  }

  /* Drawer sidebar - dark translucent */
  .drawer-side .menu {
    background: rgba(15, 23, 42, var(--glass-opacity-dark)) !important;
    backdrop-filter: blur(var(--blur-glass));
  }

  /* Chat bubbles - translucent white with glass effect */
  .chat-bubble-primary,
  .chat-bubble-secondary {
    border-radius: 1rem !important;
  }

  .chat-bubble-primary {
    background: rgba(255, 255, 255, var(--glass-opacity-medium)) !important;
    backdrop-filter: blur(var(--blur-glass));
    border: var(--border-glass-light) solid rgba(255, 255, 255, var(--border-opacity-medium));
  }

  .chat-bubble-secondary {
    background: rgba(255, 255, 255, var(--glass-opacity-light)) !important;
    backdrop-filter: blur(var(--blur-glass));
    border: var(--border-glass-light) solid rgba(255, 255, 255, var(--border-opacity-light));
  }

  /* Push to talk button - prominent glass effect */
  #btn-push-to-talk {
    background: rgba(255, 255, 255, var(--glass-opacity-medium)) !important;
    backdrop-filter: blur(var(--blur-glass));
    border: var(--border-glass-strong) solid rgba(255, 255, 255, var(--border-opacity-strong));
    transition: all var(--transition-interaction);
  }

  #btn-push-to-talk:hover {
    background: rgba(255, 255, 255, var(--glass-opacity-strong)) !important;
    border-color: rgba(255, 255, 255, var(--border-opacity-stronger));
  }

  #btn-push-to-talk:active {
    background: rgba(255, 255, 255, var(--glass-opacity-stronger)) !important;
    border-color: rgba(255, 255, 255, var(--border-opacity-strongest));
  }

  /* Toggle switches - translucent glass */
  .toggle {
    background: rgba(255, 255, 255, var(--glass-opacity-medium)) !important;
    backdrop-filter: blur(var(--blur-glass));
    border: var(--border-glass-medium) solid rgba(255, 255, 255, var(--border-opacity-medium)) !important;
  }

  .toggle:checked {
    background: rgba(255, 255, 255, var(--glass-opacity-stronger)) !important;
    border-color: rgba(255, 255, 255, var(--border-opacity-stronger)) !important;
  }
}
